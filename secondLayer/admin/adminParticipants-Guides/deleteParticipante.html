<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Eliminar Participante</title>
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <div class="form-container">
        <h2>Eliminar Participante</h2>
        <form id="baja-participante">
            <label for="id-participante">ID del Participante:</label>
            <input type="text" id="id-participante" name="id-participante" required>
            <button type="submit" class="submit-button">Eliminar Participante</button>
        </form>
    </div>

    <script>
        // Manejar el envío del formulario
        document.getElementById('baja-participante').addEventListener('submit', async function (event) {
            event.preventDefault(); // Evita que el formulario recargue la página

            // Obtén el ID ingresado por el usuario
            const participanteId = document.getElementById('id-participante').value.trim();

            if (!participanteId) {
                alert('Por favor, ingresa un ID válido');
                return;
            }

            try {
                // Realiza la solicitud DELETE al servidor
                const response = await fetch(`http://localhost:3001/api/participantes/${participanteId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message); // Muestra el mensaje de éxito
                    this.reset(); // Limpia el formulario
                } else {
                    alert(`Error: ${result.message}`); // Muestra el mensaje de error
                }
            } catch (error) {
                console.error('Error al enviar la solicitud:', error);
                alert('Ocurrió un error al eliminar el participante');
            }
        });
    </script>
</body>
</html>
